{"ast":null,"code":"var _jsxFileName = \"/Users/heinegunther/Desktop/project-exam-2-heine5150/chit-chat-social/src/components/forms/LoginForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport * as yup from \"yup\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\n// import axios from \"axios\";\n// import { FormError } from \"../common/FormError\";\nimport { LOGIN_URL } from \"../../utils/Api\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst schema = yup.object().shape({\n  username: yup.string().required(\"Please enter your username\"),\n  password: yup.string().required(\"Please enter your password\")\n});\nexport default function LoginForm() {\n  _s();\n  const [submitting, setSubmitting] = useState(false);\n  const [loginError, setLoginError] = useState(null);\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n  async function login(event) {\n    event.preventDefault();\n    console.log(event);\n    setSubmitting(true);\n    setLoginError(null);\n    try {\n      const response = await fetch(LOGIN_URL, {\n        method: \"POST\",\n        body: JSON.stringify({\n          email: event.target.email.value,\n          password: event.target.password.value\n        }),\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      console.log(event);\n      if (response.ok) {\n        const data = await response.json();\n        console.log(data);\n        window.location.href = \"/\";\n      } else {\n        setLoginError(\"Invalid username or password\");\n      }\n    } catch (error) {\n      console.error(error);\n    } finally {\n      setSubmitting(false);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: login,\n      children: /*#__PURE__*/_jsxDEV(\"fieldset\", {\n        disabled: submitting,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"email\",\n            placeholder: \"Email\",\n            className: \"form-control\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"password\",\n            placeholder: \"Password\",\n            type: \"password\",\n            className: \"form-control\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(LoginForm, \"5RU9ugGXAnmS2MbyO5pgzeHlgvg=\", false, function () {\n  return [useForm];\n});\n_c = LoginForm;\nvar _c;\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"names":["React","useState","useForm","yup","yupResolver","LOGIN_URL","schema","object","shape","username","string","required","password","LoginForm","submitting","setSubmitting","loginError","setLoginError","register","handleSubmit","errors","resolver","login","event","preventDefault","console","log","response","fetch","method","body","JSON","stringify","email","target","value","headers","ok","data","json","window","location","href","error"],"sources":["/Users/heinegunther/Desktop/project-exam-2-heine5150/chit-chat-social/src/components/forms/LoginForm.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport * as yup from \"yup\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\n// import axios from \"axios\";\n// import { FormError } from \"../common/FormError\";\nimport { LOGIN_URL } from \"../../utils/Api\";\n\nconst schema = yup.object().shape({\n  username: yup.string().required(\"Please enter your username\"),\n  password: yup.string().required(\"Please enter your password\"),\n});\n\nexport default function LoginForm() {\n  const [submitting, setSubmitting] = useState(false);\n  const [loginError, setLoginError] = useState(null);\n\n  const { register, handleSubmit, errors } = useForm({\n    resolver: yupResolver(schema),\n  });\n\n  async function login(event) {\n    event.preventDefault();\n    console.log(event);\n\n    setSubmitting(true);\n    setLoginError(null);\n\n    try {\n      const response = await fetch(LOGIN_URL, {\n        method: \"POST\",\n        body: JSON.stringify({\n          email: event.target.email.value,\n          password: event.target.password.value,\n        }),\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      console.log(event);\n      if (response.ok) {\n        const data = await response.json();\n        console.log(data);\n        window.location.href = \"/\";\n      } else {\n        setLoginError(\"Invalid username or password\");\n      }\n    } catch (error) {\n      console.error(error);\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  return (\n    <>\n      <form onSubmit={login}>\n        {/* <span> {loginError && <FormError>{loginError}</FormError>}</span> */}\n        <fieldset disabled={submitting}>\n          <div>\n            <input name=\"email\" placeholder=\"Email\" className=\"form-control\" />\n          </div>\n          <div>\n            <input\n              name=\"password\"\n              placeholder=\"Password\"\n              type=\"password\"\n              className=\"form-control\"\n            />\n          </div>\n          <button>Login</button>\n        </fieldset>\n      </form>\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}